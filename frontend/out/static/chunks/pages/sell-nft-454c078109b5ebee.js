(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5430],{77773:function(t,n,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sell-nft",function(){return e(54082)}])},54082:function(t,n,e){"use strict";e.r(n),e.d(n,{default:function(){return h}});var r=e(34051),o=e.n(r),i=e(85893),a=e(5372),s=e(83866),c=e(83078),u=e(25009),l=e(34640),p=e(50041),f=e(48036),d=e(67294);function m(t,n,e,r,o,i,a){try{var s=t[i](a),c=s.value}catch(u){return void e(u)}s.done?n(c):Promise.resolve(c).then(r,o)}function v(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){m(i,r,o,a,s,"next",t)}function s(t){m(i,r,o,a,s,"throw",t)}a(void 0)}))}}function h(){var t=(0,c.Nr)(),n=t.chainId,e=t.isWeb3Enabled,r=(t.account,n?parseInt(n).toString():null),m=n?f[r].UrbEAuction[0]:null,h=n?f[r].UrbEVehicleNft[0]:null,x=(0,d.useState)(""),b=x[0],y=x[1],N=(0,d.useState)(null),w=N[0],k=N[1],g=(0,d.useState)(null),E=(g[0],g[1]),S=(0,s.lm)(),T=(0,c.JX)().runContractFunction;function _(){return(_=v(o().mark((function t(n){var e,r,i,a,s,c;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Minting..."),e=h,r=w,i=n.data[1].inputResult?u.vz(n.data[1].inputResult,"ether").toString():"0",a=n.data[2].inputResult.toString(),t.next=7,X();case 7:return s=t.sent,c={abi:l,contractAddress:e,functionName:"mintNft",params:{index:r}},t.next=11,T({params:c,onSuccess:function(t){return A(t,e,s,i,a)},onError:function(t){console.log(t)}});case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function A(t,n,e,r,o){return C.apply(this,arguments)}function C(){return(C=v(o().mark((function t(n,e,r,i,a){var s;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Approving..."),t.next=3,n.wait();case 3:if(1!==t.sent.status){t.next=11;break}return S({type:"success",title:"Minted!",position:"topR"}),s={abi:l,contractAddress:e,functionName:"approve",params:{to:m,tokenId:r}},t.next=9,T({params:s,onSuccess:function(t){return F(t,e,r,i,a)},onError:function(t){console.log(t)}});case 9:t.next=12;break;case 11:console.error("Transaction failed"),S({type:"error",title:"Mint failed",position:"topR"});case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function F(t,n,e,r,o){return R.apply(this,arguments)}function R(){return(R=v(o().mark((function t(n,e,r,i,a){var s;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Ok! Now time to list"),t.next=3,n.wait();case 3:if(1!==t.sent.status){t.next=11;break}return S({type:"success",title:"Approved!",position:"topR"}),s={abi:p,contractAddress:m,functionName:"listItem",params:{nftAddress:e,tokenId:r,price:i,biddingTime:a}},t.next=9,T({params:s,onSuccess:function(t){return I(t)},onError:function(t){console.log(t)}});case 9:t.next=12;break;case 11:console.error("Transaction failed"),S({type:"error",title:"Approve failed",position:"topR"});case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function I(t){return j.apply(this,arguments)}function j(){return(j=v(o().mark((function t(n){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("NFT listed!"),t.next=3,n.wait();case 3:1===t.sent.status?S({type:"success",title:"NFT listed!",position:"topR"}):(console.error("Transaction failed"),S({type:"error",title:"List failed",position:"topR"}));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var P=(0,c.JX)({abi:l,contractAddress:h,functionName:"getNftInfos",params:{}}).runContractFunction,X=(0,c.JX)({abi:l,contractAddress:h,functionName:"getTokenCounter",params:{}}).runContractFunction;return(0,d.useEffect)((function(){if(e){function t(){return n.apply(this,arguments)}function n(){return(n=v(o().mark((function t(){var n,e,r,i,a,s,c,u,l,p;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P();case 2:for(n=t.sent,e=[],r=!0,i=!1,a=void 0,t.prev=5,s=n[Symbol.iterator]();!(r=(c=s.next()).done);r=!0)u=c.value,l=u.name,e.push(l);t.next=13;break;case 9:t.prev=9,t.t0=t.catch(5),i=!0,a=t.t0;case 13:t.prev=13,t.prev=14,r||null==s.return||s.return();case 16:if(t.prev=16,!i){t.next=19;break}throw a;case 19:return t.finish(16);case 20:return t.finish(13);case 21:E(e),p=e.map((function(t,n){return{id:n,label:t}})),y(p);case 24:case"end":return t.stop()}}),t,null,[[5,9,13,21],[14,,16,20]])})))).apply(this,arguments)}t()}}),[e]),(0,i.jsx)("div",{className:"flex justify-center",children:(0,i.jsx)("div",{className:"m-5",children:e&&n&&b?(0,i.jsx)(a.F,{buttonConfig:{onClick:function(){},theme:"outline"},onSubmit:function(t){return _.apply(this,arguments)},data:[{name:"Nft Name",id:"select",selectOptions:b,type:"select",value:"",validation:{required:!0}},{name:"Price (in ETH)",type:"number",value:"0",key:"price"},{name:"Auction Time (in hour)",type:"number",value:"",key:"time",validation:{required:!0}}],onChange:function(t){"Nft Name_0"===t.target.id&&k(t.target.value)},title:"Sell an NFT!",id:"Sell NFT Form"}):(0,i.jsx)("div",{children:"Web3 Currently Not Enabled"})})})}}},function(t){t.O(0,[2025,9774,2888,179],(function(){return n=77773,t(t.s=n);var n}));var n=t.O();_N_E=n}]);